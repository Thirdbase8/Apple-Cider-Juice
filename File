local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Desert Detectors",
   Icon = 0,
   LoadingTitle = "Loading",
   LoadingSubtitle = "by Hugh Man",
   Theme = "Default",
   DisableRayfieldPrompts = false,
   DisableBuildWarnings = false,

   ConfigurationSaving = {
      Enabled = true,
      FolderName = nil,
      FileName = "Big Hub"
   },

   Discord = {
      Enabled = false,
      Invite = "noinvitelink",
      RememberJoins = true
   },

   KeySystem = false,
   KeySettings = {
      Title = "Untitled",
      Subtitle = "Key System",
      Note = "No method of obtaining the key is provided",
      FileName = "Key",
      SaveKey = true,
      GrabKeyFromSite = false,
      Key = {"Hello"}
   }
})

local Tab = Window:CreateTab("Main Features", 4483362458)
local TabShovels_MDetectors = Window:CreateTab("Shovels & Metal Detectors", 4483362458)
local TabCrates = Window:CreateTab("Crates", 4483362458)
local TabTeleports = Window:CreateTab("Teleports", 4483362458)
local TabMisc = Window:CreateTab("Misc", 4483362458)
local TabCre = Window:CreateTab("Credits", 4483362458)

-- Smelt Item Button
local SmeltButton = Tab:CreateButton({
   Name = "Smelt Item",
   Callback = function()
      local success, result = pcall(function()
         loadstring(game:HttpGet('https://raw.githubusercontent.com/Thirdbase8/Script/refs/heads/main/Smelt%20item'))()
      end)

      if not success then
         warn("Error loading Smelt Item script: " .. result)
      end
   end,
})

-- Loot Highlight Toggle (No Limit on Highlighted Objects)
local highlightEnabled = false
local lootFolder = game.Workspace:FindFirstChild("Loot")

local function createHighlight(object)
   if not object:FindFirstChild("Highlight") then
      local highlight = Instance.new("Highlight")
      highlight.Name = "Highlight"
      highlight.Parent = object
      highlight.Adornee = object
      highlight.FillColor = Color3.fromRGB(255, 255, 0)  -- Yellow highlight
      highlight.FillTransparency = 0.5
      highlight.OutlineColor = Color3.fromRGB(255, 255, 255)  -- White outline
      highlight.OutlineTransparency = 0.3
   end
end

local function removeHighlight(object)
   local highlight = object:FindFirstChild("Highlight")
   if highlight then
      highlight:Destroy()
   end
end

local function updateAllHighlights()
   if lootFolder then
      for _, item in pairs(lootFolder:GetChildren()) do
         if highlightEnabled then
            createHighlight(item)
         else
            removeHighlight(item)
         end
      end
   end
end

local function toggleHighlights(Value)
   highlightEnabled = Value
   updateAllHighlights()

   if lootFolder then
      lootFolder.ChildAdded:Connect(function(item)
         if highlightEnabled then
            createHighlight(item)
         end
      end)

      lootFolder.ChildRemoved:Connect(function(item)
         removeHighlight(item)
      end)
   end
end

local ToggleLootHighlight = Tab:CreateToggle({
   Name = "Loot Highlight",
   CurrentValue = false,
   Flag = "ToggleLootHighlight", 
   Callback = toggleHighlights,
})

-- Sell All Button
local SellAllButton = Tab:CreateButton({
   Name = "Sell all",
   Callback = function()
      local success, result = pcall(function()
         loadstring(game:HttpGet('https://raw.githubusercontent.com/Thirdbase8/Script/refs/heads/main/Sell%20Inventory'))()
      end)

      if not success then
         warn("Error loading Sell All script: " .. result)
      end
   end,
})

-- Get 1M Sheckles Button
local ShecklesButton = Tab:CreateButton({
   Name = "Get 10M Sheckles",
   Callback = function()
      local success, result = pcall(function()
         loadstring(game:HttpGet('https://raw.githubusercontent.com/Thirdbase8/Script/refs/heads/main/10M%20Sheckles'))()
      end)

      if not success then
         warn("Error loading 1M Sheckles script: " .. result)
      end
   end,
})

-- Crate Buttons
local CrateButton1 = TabCrates:CreateButton({
   Name = "Purchase Legendary Crate",
   Callback = function()
      local success, result = pcall(function()
         loadstring(game:HttpGet('https://raw.githubusercontent.com/Thirdbase8/Script/refs/heads/main/Purchase%20Legendary%20Crate'))()
      end)

      if not success then
         warn("Error loading Purchase Legendary Crate script: " .. result)
      end
   end,
})

local CrateButton2 = TabCrates:CreateButton({
   Name = "Purchase 100X Charm Crate",
   Callback = function()
      local success, result = pcall(function()
         loadstring(game:HttpGet('https://raw.githubusercontent.com/Thirdbase8/Script/refs/heads/main/Charm%20crates'))()
      end)

      if not success then
         warn("Error loading Purchase Charm Crate script: " .. result)
      end
   end,
})

local CrateButton3 = TabShovels_MDetectors:CreateButton({
   Name = "Purchase all shovels",
   Callback = function()
      local success, result = pcall(function()
         loadstring(game:HttpGet('https://raw.githubusercontent.com/Thirdbase8/Script/refs/heads/main/Purchase%20all%20shovels'))()
      end)

      if not success then
         warn("Error loading Purchase Shovels script: " .. result)
      end
   end,
})

local CrateButton4 = TabShovels_MDetectors:CreateButton({
   Name = "Purchase all Detectors",
   Callback = function()
      local success, result = pcall(function()
         loadstring(game:HttpGet('https://raw.githubusercontent.com/Thirdbase8/Script/refs/heads/main/Purchase%20all%20detectors'))()
      end)

      if not success then
         warn("Error loading Purchase Detectors script: " .. result)
      end
   end,
})

-- Credits Label
local Label1 = TabCre:CreateLabel("Credits to Hugh Man", 4483362458, Color3.fromRGB(0, 0, 0), false)
local Label2 = TabCre:CreateLabel("If you want to support me my cashapp is $Thirdbase8", 4483362458, Color3.fromRGB(0, 0, 0), false)

-- Unload Button
local ButtonUnload = TabMisc:CreateButton({
   Name = "Unload",
   Callback = function()
      Rayfield:Destroy()
   end,
})

local TeleportLocations = {
    Dusthaven = CFrame.new(175, 77, 232),
    TheFarm = CFrame.new(39, 77, -179),
    Tractors = CFrame.new(190, 77, -224),
    TrainStation = CFrame.new(751, 77, -949),
    TheMiddleOfNowhere = CFrame.new(-1002, 77, 1813)
}

local Dropdown = TabTeleports:CreateDropdown({
   Name = "Teleports",
   Options = {"None", "Dusthaven", "TheFarm", "Tractors", "TrainStation", "TheMiddleOfNowhere"},
   CurrentOption = {"None"},
   MultipleOptions = false,
   Flag = "Dropdown1", 
   Callback = function(Options)
      local selectedLocation = Options[1]
      local teleportCFrame = TeleportLocations[selectedLocation]

      if teleportCFrame then
         local character = game.Players.LocalPlayer.Character
         if character and character:FindFirstChild("HumanoidRootPart") then
            character:SetPrimaryPartCFrame(teleportCFrame)
         end
      end
   end,
})

Dropdown:SetCurrentOption({"None"})

-- Load Configuration
Rayfield:LoadConfiguration()
